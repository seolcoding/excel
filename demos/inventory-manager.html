<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¬ê³ ê´€ë¦¬ í”„ë¡œê·¸ë¨</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background: #1a1a2e; color: #eee; min-height: 100vh; }
        .app-container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .card { background: #16213e; border: none; border-radius: 12px; }
        .card-header { background: #0f3460; border-radius: 12px 12px 0 0 !important; }
        .table { color: #eee; }
        .table thead { background: #0f3460; }
        .btn-action { background: #e94560; border: none; }
        .btn-action:hover { background: #ff6b6b; }
        .stat-card { background: linear-gradient(135deg, #0f3460, #16213e); padding: 1.5rem; border-radius: 12px; text-align: center; }
        .stat-value { font-size: 2rem; font-weight: bold; color: #e94560; }
        .low-stock { color: #ff6b6b; }
        .form-control, .form-select { background: #1a1a2e; border-color: #0f3460; color: #eee; }
        .form-control:focus { background: #16213e; color: #eee; border-color: #e94560; }
        @media print { body { background: white; color: #333; } .card { background: white; } .table { color: #333; } }
    </style>
</head>
<body>
    <div class="app-container" x-data="inventoryManager()">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">ğŸ“¦ ì¬ê³ ê´€ë¦¬ í”„ë¡œê·¸ë¨</h2>
            <div>
                <button class="btn btn-success" @click="showAddModal = true">+ í’ˆëª© ì¶”ê°€</button>
                <a href="../index.html" class="btn btn-outline-light">ëª©ë¡ìœ¼ë¡œ</a>
            </div>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value" x-text="items.length"></div>
                    <small>ì „ì²´ í’ˆëª©</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value" x-text="totalStock.toLocaleString()"></div>
                    <small>ì´ ì¬ê³ ëŸ‰</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value" x-text="lowStockCount"></div>
                    <small class="low-stock">ë¶€ì¡± í’ˆëª©</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value" x-text="formatCurrency(totalValue)"></div>
                    <small>ì´ ì¬ê³ ê°€ì¹˜</small>
                </div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-4">
                        <input type="text" class="form-control" x-model="search" placeholder="í’ˆëª©ëª… ê²€ìƒ‰...">
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" x-model="categoryFilter">
                            <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                            <template x-for="cat in categories"><option :value="cat" x-text="cat"></option></template>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" x-model="stockFilter">
                            <option value="">ì¬ê³  ìƒíƒœ</option>
                            <option value="low">ë¶€ì¡±</option>
                            <option value="normal">ì •ìƒ</option>
                            <option value="excess">ê³¼ì‰</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì¬ê³  í…Œì´ë¸” -->
        <div class="card">
            <div class="card-header"><h5 class="mb-0">ì¬ê³  í˜„í™©</h5></div>
            <div class="card-body p-0">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>ì½”ë“œ</th>
                            <th>í’ˆëª©ëª…</th>
                            <th>ì¹´í…Œê³ ë¦¬</th>
                            <th class="text-end">í˜„ì¬ê³ </th>
                            <th class="text-end">ì•ˆì „ì¬ê³ </th>
                            <th class="text-end">ë‹¨ê°€</th>
                            <th class="text-end">ì¬ê³ ê°€ì¹˜</th>
                            <th>ìƒíƒœ</th>
                            <th class="text-center">ì…/ì¶œê³ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="item in filteredItems" :key="item.code">
                            <tr>
                                <td x-text="item.code"></td>
                                <td x-text="item.name"></td>
                                <td x-text="item.category"></td>
                                <td class="text-end" :class="item.stock < item.safeStock ? 'low-stock fw-bold' : ''" x-text="item.stock.toLocaleString()"></td>
                                <td class="text-end" x-text="item.safeStock.toLocaleString()"></td>
                                <td class="text-end" x-text="item.price.toLocaleString() + 'ì›'"></td>
                                <td class="text-end" x-text="(item.stock * item.price).toLocaleString() + 'ì›'"></td>
                                <td>
                                    <span class="badge" :class="getStatusClass(item)" x-text="getStatus(item)"></span>
                                </td>
                                <td class="text-center">
                                    <button class="btn btn-sm btn-outline-success" @click="adjustStock(item, 10)">+</button>
                                    <button class="btn btn-sm btn-outline-danger" @click="adjustStock(item, -10)">-</button>
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- í’ˆëª© ì¶”ê°€ ëª¨ë‹¬ -->
        <div class="modal" :class="showAddModal ? 'd-block' : ''" tabindex="-1" style="background:rgba(0,0,0,0.5)" x-show="showAddModal" @click.self="showAddModal=false">
            <div class="modal-dialog">
                <div class="modal-content" style="background:#16213e">
                    <div class="modal-header border-0">
                        <h5 class="modal-title">í’ˆëª© ì¶”ê°€</h5>
                        <button class="btn-close btn-close-white" @click="showAddModal=false"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3"><label class="form-label">í’ˆëª©ì½”ë“œ</label><input class="form-control" x-model="newItem.code"></div>
                        <div class="mb-3"><label class="form-label">í’ˆëª©ëª…</label><input class="form-control" x-model="newItem.name"></div>
                        <div class="mb-3"><label class="form-label">ì¹´í…Œê³ ë¦¬</label><input class="form-control" x-model="newItem.category"></div>
                        <div class="row">
                            <div class="col-6 mb-3"><label class="form-label">í˜„ì¬ê³ </label><input type="number" class="form-control" x-model.number="newItem.stock"></div>
                            <div class="col-6 mb-3"><label class="form-label">ì•ˆì „ì¬ê³ </label><input type="number" class="form-control" x-model.number="newItem.safeStock"></div>
                        </div>
                        <div class="mb-3"><label class="form-label">ë‹¨ê°€</label><input type="number" class="form-control" x-model.number="newItem.price"></div>
                    </div>
                    <div class="modal-footer border-0">
                        <button class="btn btn-secondary" @click="showAddModal=false">ì·¨ì†Œ</button>
                        <button class="btn btn-action" @click="addItem()">ì¶”ê°€</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center text-muted mt-4 small">ì›ë³¸: VBAí”„ë¡œì íŠ¸-ì—‘ì…€-ì¬ê³ ê´€ë¦¬-í”„ë¡œê·¸ë¨</footer>
    </div>

    <script>
        function inventoryManager() {
            return {
                search: '', categoryFilter: '', stockFilter: '', showAddModal: false,
                newItem: { code: '', name: '', category: '', stock: 0, safeStock: 0, price: 0 },
                items: [
                    { code: 'A001', name: 'ë…¸íŠ¸ë¶ ì¶©ì „ê¸°', category: 'ì „ìê¸°ê¸°', stock: 45, safeStock: 20, price: 35000 },
                    { code: 'A002', name: 'USB ì¼€ì´ë¸”', category: 'ì „ìê¸°ê¸°', stock: 8, safeStock: 30, price: 5000 },
                    { code: 'B001', name: 'A4 ë³µì‚¬ìš©ì§€', category: 'ì‚¬ë¬´ìš©í’ˆ', stock: 150, safeStock: 50, price: 25000 },
                    { code: 'B002', name: 'ë³¼íœ ì„¸íŠ¸', category: 'ì‚¬ë¬´ìš©í’ˆ', stock: 12, safeStock: 20, price: 8000 },
                    { code: 'C001', name: 'ëª¨ë‹ˆí„° ê±°ì¹˜ëŒ€', category: 'ê°€êµ¬', stock: 5, safeStock: 10, price: 45000 },
                ],
                get categories() { return [...new Set(this.items.map(i => i.category))]; },
                get totalStock() { return this.items.reduce((s, i) => s + i.stock, 0); },
                get totalValue() { return this.items.reduce((s, i) => s + i.stock * i.price, 0); },
                get lowStockCount() { return this.items.filter(i => i.stock < i.safeStock).length; },
                get filteredItems() {
                    return this.items.filter(i => {
                        if (this.search && !i.name.includes(this.search)) return false;
                        if (this.categoryFilter && i.category !== this.categoryFilter) return false;
                        if (this.stockFilter === 'low' && i.stock >= i.safeStock) return false;
                        if (this.stockFilter === 'normal' && (i.stock < i.safeStock || i.stock > i.safeStock * 2)) return false;
                        if (this.stockFilter === 'excess' && i.stock <= i.safeStock * 2) return false;
                        return true;
                    });
                },
                getStatus(item) { return item.stock < item.safeStock ? 'ë¶€ì¡±' : item.stock > item.safeStock * 2 ? 'ê³¼ì‰' : 'ì •ìƒ'; },
                getStatusClass(item) { return item.stock < item.safeStock ? 'bg-danger' : item.stock > item.safeStock * 2 ? 'bg-warning text-dark' : 'bg-success'; },
                adjustStock(item, delta) { item.stock = Math.max(0, item.stock + delta); },
                addItem() {
                    if (this.newItem.code && this.newItem.name) {
                        this.items.push({ ...this.newItem });
                        this.newItem = { code: '', name: '', category: '', stock: 0, safeStock: 0, price: 0 };
                        this.showAddModal = false;
                    }
                },
                formatCurrency(v) { return (v / 10000).toFixed(0) + 'ë§Œì›'; }
            };
        }
    </script>
</body>
</html>
